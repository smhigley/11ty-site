<!doctype html>
<html dir="ltr" lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="alternate" type="application/rss+xml" title="Sarah Higley" href="https://sarahmhigley.com/feed.xml" />
  <title>Playing with state | Sarah Higley</title>
  <link rel="canonical" href="https://sarahmhigley.com/writing/playing-with-state/" />

  <meta property="og:site_name" content="Sarah Higley" />
  <meta property="og:title" content="Playing with state | Sarah Higley" />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://sarahmhigley.com/writing/playing-with-state/" />
  <meta name="twitter:creator" content="@codingchaos" />
  <meta property="og:image" content="https://sarahmhigley.com/assets/avatar.png" />
  <meta name="twitter:image" content="https://sarahmhigley.com/assets/avatar.png" />
  <meta property="og:image:alt" content="Illustrated avatar of Sarah" />
  <meta name="twitter:image:alt" content="Illustrated avatar of Sarah" />

  
    <meta name="description" content="A closer look at play/pause buttons" />
    <meta name="twitter:description" content="A closer look at play/pause buttons" />
    <meta property="og:description" content="A closer look at play/pause buttons" />
  

  <style type="text/css">/*! normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css */html{line-height:1.15;-webkit-text-size-adjust:100%}body{margin:0}main{display:block}h1{font-size:2em;margin:.67em 0}hr{box-sizing:content-box;height:0;overflow:visible}pre{font-family:monospace,monospace;font-size:1em}a{background-color:transparent}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,samp{font-family:monospace,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-0.25em}sup{top:-0.5em}img{border-style:none}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button,select{text-transform:none}button,[type=button],[type=reset],[type=submit]{-webkit-appearance:button}button::-moz-focus-inner,[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner{border-style:none;padding:0}button:-moz-focusring,[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring{outline:1px dotted ButtonText}fieldset{padding:.35em .75em .625em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}progress{vertical-align:baseline}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}details{display:block}summary{display:list-item}template{display:none}[hidden]{display:none}code[class*=language-],pre[class*=language-]{color:#f8f8f2;background:none;font-family:Consolas,Monaco,"Andale Mono","Ubuntu Mono",monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:1em;overflow:auto;border-radius:.3em}:not(pre)>code[class*=language-],pre[class*=language-]{background:#2b2b2b}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.comment,.token.prolog,.token.doctype,.token.cdata{color:#d4d0ab}.token.punctuation{color:#fefefe}.token.property,.token.tag,.token.constant,.token.symbol,.token.deleted{color:#ffa07a}.token.boolean,.token.number{color:#00e0e0}.token.selector,.token.attr-name,.token.string,.token.char,.token.builtin,.token.inserted{color:#abe338}.token.operator,.token.entity,.token.url,.language-css .token.string,.style .token.string,.token.variable{color:#00e0e0}.token.atrule,.token.attr-value,.token.function{color:gold}.token.keyword{color:#00e0e0}.token.regex,.token.important{color:gold}.token.important,.token.bold{font-weight:bold}.token.italic{font-style:italic}.token.entity{cursor:help}@media screen and (-ms-high-contrast: active){code[class*=language-],pre[class*=language-]{color:windowText;background:window}:not(pre)>code[class*=language-],pre[class*=language-]{background:window}.token.important{background:highlight;color:window;font-weight:normal}.token.atrule,.token.attr-value,.token.function,.token.keyword,.token.operator,.token.selector{font-weight:bold}.token.attr-value,.token.comment,.token.doctype,.token.function,.token.keyword,.token.operator,.token.property,.token.string{color:highlight}.token.attr-value,.token.url{font-weight:normal}}html{font-size:calc(1em + 0.5vw)}body{font-family:"Segoe UI",Tahoma,Geneva,Verdana,sans-serif;line-height:1.6;word-wrap:break-word}h1,h2,h3,h4,h5,h6,.h1,.h2,.h3,.h4,.h5,.h6{font-family:"Josefin Slab",Garamond,serif;font-weight:bold;margin:0 0 1.5rem}h1,.h1{font-size:2.5rem;line-height:1.15}h2,.h2{font-size:1.75rem;line-height:1.2}h3,.h3{font-size:1.5rem;line-height:1.2}h4,.h4{font-size:1.15rem}a{color:#3c128f;text-decoration:underline}a:focus{outline:3px dashed #3c128f;outline-offset:3px}blockquote{border-left:4px solid #ccc;font-size:1.1rem;line-height:1.8;margin:1.5rem 0;padding:.5rem 2rem}blockquote p:last-child{margin-bottom:0}code{background:#eee;border-radius:.2em;padding:.1em .2em}img{max-width:100%}figure{background:#eee;margin:0 0 1.5rem;padding:.5rem}figcaption{font-size:.8em}ul,ol,p,pre,.table-wrapper{margin:0 0 1.5rem}ul li,ol li{margin:0 0 .5rem}.table-wrapper{max-width:100%;overflow-x:scroll}.support-table{border:1px solid #9d9d9d;border-collapse:collapse;border-spacing:0}.support-table tr{background-color:#fff;border-bottom:1px solid #9d9d9d}.support-table tr:nth-child(even){background-color:#f4f6f7}.support-table th{text-align:left}.support-table th,.support-table td{border-left:1px solid #9d9d9d;padding:.5em 1em}.support-table th:first-child,.support-table td:first-child{border-left:0}.support-table .false{background-color:#ffc3bf}.support-table .true{background-color:#caf4c6}body{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}*,*::before,*::after{box-sizing:inherit}.container{display:flex;min-height:100vh}@media screen and (max-width: 800px){.container{display:block}}.header{flex:0 0 260px;border-right:3px solid #28164a;min-height:100%;outline:10px solid rgba(60,18,143,.5);padding:1em}@media screen and (max-width: 800px){.header{border-bottom:3px solid #28164a;border-right:none;margin-bottom:1.5rem}}.profile-info{border-bottom:1px solid #ccc;font-family:"Josefin Slab",Garamond,serif;font-size:1.5rem;line-height:1.2;margin-bottom:1rem;padding-bottom:1rem;text-transform:uppercase;text-align:center}.profile-info img{display:block;margin:0 auto;max-width:250px;width:100%}.main{flex:1 1 auto;max-width:1000px;overflow-x:auto;padding:1em 1em 1em 2.5em}.main-nav ul{list-style-type:none;margin:0;padding:0}@media screen and (max-width: 800px){.main-nav ul{display:flex;align-items:center;justify-content:center;flex-wrap:wrap}}.main-nav li{margin:0}@media screen and (max-width: 800px){.main-nav li{margin:0 .5rem}}.main-nav a{color:#000;display:inline-block;font-weight:bold;overflow:hidden;padding:0 5px 6px;position:relative;text-decoration:none;text-transform:uppercase}.main-nav a::after{content:"";position:absolute;left:0;bottom:0;width:200%;height:5px;background:#ccc;background:linear-gradient(90deg, #3c128f 0%, #3c128f 50%, #ccc 50%, #ccc 100%);transform:translateX(-50%);transition:transform .3s ease-out}.main-nav a:hover::after,.main-nav a.active::after{transform:translateX(0)}.item-list{list-style-type:none;padding:0}.item-list .meta{font-size:.8rem;margin:0 0 .5rem}.meta{display:block;color:#666;margin:-1.5rem 0 1.5rem}.post-footer{border-top:1px solid #ccc;display:flex;justify-content:space-between;padding:1em}.post-footer a{align-items:center;background-color:#ccc;border-radius:3px;color:#000;display:flex;padding:.5em 1em .5em 1.25em;text-decoration:none}.post-footer a:hover,.post-footer a:focus{background-color:#28164a;color:#fff}.post-footer a::before{content:"";border-left:2px solid currentColor;border-bottom:2px solid currentColor;display:inline-block;height:.5em;transform:translateX(-0.25em) rotate(45deg);width:.5em}.post-footer a.top-link::before{transform:translateX(-0.4em) rotate(135deg)}/*# sourceMappingURL=site.css.map */
</style>
  <link href="https://fonts.googleapis.com/css?family=Josefin+Slab" rel="stylesheet" type="text/css">
</head>
<body>
  <div class="container">
    <header class="header">
      <div class="profile-info">
        <img src="/assets/sarah-avatar.svg" role="img" alt="Illustrated avatar of Sarah with a cat" class="profile-pic">
        Sarah Higley
      </div>
      <nav class="main-nav">
        <ul>
          <li><a href="/" >Home</a></li>
          <li><a href="/writing" class="active" aria-current="page">Writing</a></li>
          <li><a href="/speaking"  >Speaking</a></li>
        </ul>
      </nav>
    </header>

    <main class="main">
      <h1 class="page-title" id="page-top">Playing with state</h1>

      
  <div class="meta">November 4, 2019</div>
  <p>In an effort to convince everyone (who reads these blog posts) that I don't only obsess over tooltips, let's talk about another seemingly simple concept and make it unexpectedly complex. This time, we're tackling the play/pause toggle button.</p>
<p>By a play/pause toggle, I mean this thing:</p>
<p><img src="https://user-images.githubusercontent.com/3819570/67927236-ff256480-fbaf-11e9-8aec-55a4353bfe5b.jpg" alt="Screenshot of the youtube player with the play button highlighted. Maru is staring at a box in the backgroud."></p>
<p>i.e. that thing you click on (or key press/touch/switch/etc) to get your daily cute cat fix. You press it, it switches from a play icon to a pause icon, Maru jumps into a box, and bliss ensues.</p>
<p>That's where I barge in and ask about that middle part -- switching from play to pause -- and ruin it all (sorry Maru). The thing is, a play/pause button is effectively a <a href="https://inclusive-components.design/toggle-button/">toggle button</a>, by which I mean it switches between two binary states based on user interaction. The established pattern for accomplishing this is by updating the <code>aria-pressed</code> state attribute, which accepts a true/false value.</p>
<p><img src="https://user-images.githubusercontent.com/3819570/67974752-ded6c380-fc0a-11e9-98a4-5024af40d294.png" alt="two side by side bookmark buttons, one grey with aria-pressed set to false, and one blue with aria-pressed set to true"></p>
<p>Play/pause buttons (and by extension, start/stop buttons) are the black sheep of the toggle button family. They generally do not have any <code>aria-pressed</code> on/off state defined, and instead change their accessible name from &quot;play&quot; to &quot;pause&quot; when activated. When I say &quot;generally,&quot; I mean this was true for the following sites, chosen for no formal reason other than that I happened to know they would contain media players:</p>
<ul>
<li><a href="https://www.youtube.com/">Youtube</a>: dynamically changes <code>aria-label</code></li>
<li><a href="https://mixer.com/">Mixer</a>: dynamically changes <code>aria-label</code></li>
<li><a href="https://vimeo.com/">Vimeo</a>: dynamically changes name from contents (by swapping out labelled graphics)</li>
<li><a href="https://soundcloud.com/">Soundcloud</a>: dynamically changes both text content and the <code>title</code> attribute</li>
<li><a href="https://www.w3.org/WAI/tutorials/carousels/working-example/">WAI carousel tutorial</a>: dynamically changes text content</li>
<li><s>Twitter's media player</s>: Twitter's media player actually has no accessible name and no state defined for its play button. Whoops.</li>
</ul>
<p>So why does this matter? Traditional toggle buttons switch <code>aria-pressed</code> from true to false, and play/pause buttons change their calculated name from &quot;play&quot; to &quot;pause.&quot; No big deal?</p>
<h2 id="property-vs.-state">Property vs. State</h2>
<p>Most dynamic changes to a UI component (at least, changes that happen while a user is interacting with it) are communicated through state changes rather than property changes. The ARIA spec has this to say about <a href="https://www.w3.org/WAI/PF/aria/states_and_properties#statevsprop">states vs. properties</a>:</p>
<blockquote>
<p>One major difference is that the values of properties (such as aria-labelledby) are often less likely to change throughout the application life-cycle than the values of states (such as aria-checked) which may change frequently due to user interaction. Note that the frequency of change difference is not a rule; a few properties, such as aria-activedescendant, aria-valuenow, and aria-valuetext are expected to change often.</p>
</blockquote>
<p>This comes across as fairly similar to the use of states vs. properties in javascript application frameworks as well -- a common convention is that a change in application state will trigger a re-render, while a change to a property will not (unless manually triggered).</p>
<p>It might therefore seem reasonable to also expect a screen reader to pick up and announce state changes but not property changes. However, as with many things related to ARIA, it is not that simple.</p>
<p>Some properties such as <code>aria-activedescendant</code>, <code>aria-valuenow</code>, and <code>aria-valuetext</code> can be expected to be announced by screen readers when changed (support issues aside). Some state changes (such as <code>aria-disabled</code>) are not consistently announced when changed. However, as a very general rule of thumb, it is safer to assume that a change in state will be communicated than a change in property (and please never change a role during a user interaction).</p>
<p>Side note: when I reference changes that are announced by screen readers, I mean a change to the element that currently has focus that causes some sort of screen reader-generated feedback without the user moving focus.</p>
<p>Most screen readers nowadays rely on <a href="https://alistapart.com/article/semantics-to-screen-readers/">Accessibility API</a> events to get notifications about changes to the DOM. So, for example, when <code>aria-pressed</code> updates from <code>true</code> to <code>false</code> a <code>PropertyChangedEvent</code> will fire, allowing a screen reader to listen to that event and react to it. Each platform's Accessibility API handles this slightly differently (<code>PropertyChangedEvent</code> is specific to <a href="https://docs.microsoft.com/en-us/windows/win32/winauto/entry-uiauto-win32">UIA</a> on Windows), but the principal is roughly the same. This <a href="https://w3c.github.io/core-aam/#mapping_events_state-change">list of state and property change events</a> details which states and properties should raise API events when changed. Not all of those states and properties will necessarily be communicated by all screen readers, but these are the ones that at least have a mechanism to do so.</p>
<p>All this is relevant since <code>aria-pressed</code> is a state, and the accessible name is a property.</p>
<h2 id="name-changes">Name Changes</h2>
<p>The conventional wisdom is to not change the name of a control while the user is interacting with it. It turns out this is pretty good conventional wisdom: upon testing, I found that while a name change is sometimes announced, it is not nearly consistent enough to be relied upon.</p>
<p>Using this <a href="https://jsfiddle.net/czsnj9xp/show">button code sample</a>, I tested whether name changes and <code>aria-pressed</code> changes were announced using the following screen reader/browser combinations, and using a few different methods of defining the accessible name:</p>
<div class="table-wrapper">
  <table class="support-table">
    <thead>
      <tr>
        <th></th>
        <th scope="col"><code>aria-label</code></th>
        <th scope="col"><code>aria-labelledby</code></th>
        <th scope="col">content</th>
        <th scope="col"><code>aria-pressed</code></th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <th scope="row">NVDA + Firefox</th>
        <td class="true">yes</td>
        <td class="false">no</td>
        <td class="false">no</td>
        <td class="true">yes</td>
      </tr>
      <tr>
        <th scope="row">NVDA + Chrome</th>
        <td class="true">yes</td>
        <td class="true">yes</td>
        <td class="false">no</td>
        <td class="true">yes</td>
      </tr>
      <tr>
        <th scope="row">NVDA + Edge</th>
        <td class="true">yes</td>
        <td class="true">yes</td>
        <td class="true">yes</td>
        <td class="true">yes</td>
      </tr>
      <tr>
        <th scope="row">JAWS + Firefox</th>
        <td class="false">no</td>
        <td class="false">no</td>
        <td class="false">no</td>
        <td class="true">yes</td>
      </tr>
      <tr>
        <th scope="row">JAWS + Chrome</th>
        <td class="false">no</td>
        <td class="false">no</td>
        <td class="false">no</td>
        <td class="true">yes</td>
      </tr>
      <tr>
        <th scope="row">JAWS + Edge</th>
        <td class="false">no</td>
        <td class="false">no</td>
        <td class="false">no</td>
        <td class="true">yes</td>
      </tr>
      <tr>
        <th scope="row">JAWS + IE 11</th>
        <td class="true">yes</td>
        <td class="true">yes</td>
        <td class="true">yes</td>
        <td class="true">yes</td>
      </tr>
      <tr>
        <th scope="row">Narrator + Edge</th>
        <td class="true">yes</td>
        <td class="true">yes</td>
        <td class="true">yes</td>
        <td class="true">yes</td>
      </tr>
      <tr>
        <th scope="row">iOS VoiceOver + Safari</th>
        <td class="true">yes</td>
        <td class="true">yes</td>
        <td class="true">yes</td>
        <td class="true">yes</td>
      </tr>
      <tr>
        <th scope="row">macOS VoiceOver + Safari</th>
        <td class="true">yes</td>
        <td class="true">yes</td>
        <td class="true">yes</td>
        <td class="true">yes</td>
      </tr>
      <tr>
        <th scope="row">Talkback + Chrome</th>
        <td class="false">no</td>
        <td class="false">no</td>
        <td class="false">no</td>
        <td class="true">yes</td>
      </tr>
    </tbody>
  </table>
</div>
<p>Side note: NVDA, you drunk?</p>
<h2 id="actual-recommendations">Actual Recommendations</h2>
<p>You made it this far, congratulations! Time for some concrete recommendations. The big takeaway should be this:</p>
<p><strong>Change the name, but not the state, of play/pause buttons. Use state for all other toggle buttons.</strong></p>
<p>Why? First, because the mechanics of a play/pause (or start/stop) button are so well understood by now that immediate state change feedback is not critical.</p>
<p>This is combined with the fact that using <code>aria-pressed=&quot;false&quot;</code> for a pause button would result in some variation of &quot;play button off&quot; to be read by screen readers, which is not particularly reflective of a visual pause icon. Creating a difference between the programmatic label and visual text (or icon) can cause issues for speech control users, sighted screen reader users, and effective communication between blind screen reader users and visual users (e.g. during a support call).</p>
<p>This one edge case does not take away the general recommendation to change the <code>aria-pressed</code> state, and not the name, for other toggle buttons. Toggle buttons that are part of less well-known interfaces would benefit more from providing immediate feedback, and the only reliable cross-screen-reader cross-browser way to do that is to use <code>aria-pressed</code>.</p>
<p>As a final note, never change both the name and <code>aria-pressed</code> state in tandem. That way, confusion lies. Just imagine trying to parse the meaning of &quot;play button, on&quot; vs. &quot;pause button, off&quot;.</p>
<h2 id="further-reading">Further Reading</h2>
<ul>
<li><a href="https://scottaohara.github.io/a11y_styled_form_controls/src/toggle-button-switch/">Styled Toggle Buttons</a> from Scott O'Hara</li>
<li><a href="https://www.smashingmagazine.com/2017/09/building-inclusive-toggle-buttons/">Building Inclusive Toggle Buttons</a> from Heydon Pickering</li>
<li><a href="https://docs.microsoft.com/en-us/windows/uwp/design/controls-and-patterns/toggles">UWP Toggle Switch description</a>: a Windows desktop toggle pattern, for reference</li>
</ul>


  <div class="post-footer">
    <a href="/writing" class="back-link">All Posts</a>
    <a href="#page-top" class="top-link">Back to top</a>
  </div>

    </main>
  </div>
</body>
</html>
